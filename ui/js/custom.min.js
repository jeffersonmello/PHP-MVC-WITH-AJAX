$(function(){$(document).on("click","a#user_list",function(){b(this)});$(document).on("click","a#create_user_form",function(){getCreateForm(this)});$(document).on("click","button#add_user",function(){addUser(this)});$(document).on("click","a.delete_confirm",function(){deleteConfirmation(this)});$(document).on("click","button.delete",function(){deleteUser(this)});$(document).on("dblclick","td.edit",function(){makeEditable(this)});$(document).on("blur","input#editbox",function(){removeEditable(this)});function b(c){$("#indicator").show();$.post("controller.php",{action:"get_users"},function(d,e){a(d);$("#indicator").hide()},"json")}function a(c){var d='<table width="600" cellpadding="5" class="table table-hover table-bordered"><thead><tr><th scope="col">Name</th><th scope="col">Email</th><th scope="col">Mobile</th><th scope="col">Address</th><th scope="col"></th></tr></thead><tbody>';$.each(c,function(f,e){d+="<tr>";d+='<td class="edit" field="name" user_id="'+e.id+'">'+e.name+"</td>";d+='<td class="edit" field="email" user_id="'+e.id+'">'+e.email+"</td>";d+='<td class="edit" field="mobile" user_id="'+e.id+'">'+e.mobile+"</td>";d+='<td class="edit" field="address" user_id="'+e.id+'">'+e.address+"</td>";d+='<td><a href="javascript:void(0);" user_id="'+e.id+'" class="delete_confirm btn btn-danger"><i class="icon-remove icon-white"></i></a></td>';d+="</tr>"});d+="</tbody></table>";$("div#content").html(d)}});function addUser(a){$("#indicator").show();var c=new Object();c.name=$("input#name").val();c.email=$("input#email").val();c.mobile=$("input#mobile").val();c.address=$("textarea#address").val();var b=JSON.stringify(c);$.post("controller.php",{action:"add_user",user:b},function(d,e){getUserList(a);$("#indicator").hide()},"json")}function getCreateForm(a){var b='<div class="input-prepend">';b+='<span class="add-on"><i class="icon-user icon-black"></i> Name</span>';b+='<input type="text" id="name" name="name" value="" class="input-xlarge" />';b+="</div><br/><br/>";b+='<div class="input-prepend">';b+='<span class="add-on"><i class="icon-envelope icon-black"></i> Email</span>';b+='<input type="text" id="email" name="email" value="" class="input-xlarge" />';b+="</div><br/><br/>";b+='<div class="input-prepend">';b+='<span class="add-on"><i class="icon-headphones icon-black"></i> Mobile</span>';b+='<input type="text" id="mobile" name="mobile" value="" class="input-xlarge" />';b+="</div><br/><br/>";b+='<div class="input-prepend">';b+='<span class="add-on add-on-area "><i class="icon-home icon-black"></i> Address</span>';b+='<textarea row="5" id="address" name="address" class="input-xlarge"></textarea>';b+="</div><br/><br/>";b+='<div class="control-group">';b+='<div class="">';b+='<button type="button" id="add_user" class="btn btn-primary"><i class="icon-ok icon-white"></i> Add User</button>';b+="</div>";b+="</div>";$("div#content").html(b)}function deleteConfirmation(a){$("#delete_confirm_modal").modal("show");$("#delete_confirm_modal input#user_id").val($(a).attr("user_id"))}function deleteUser(a){var c=new Object();c.id=$("#delete_confirm_modal input#user_id").val();var b=JSON.stringify(c);$.post("controller.php",{action:"delete_user",user:b},function(d,e){getUserList(a);$("#delete_confirm_modal").modal("hide")},"json")}function removeEditable(a){$("#indicator").show();var c=new Object();c.id=$(".current").attr("user_id");c.field=$(".current").attr("field");c.newvalue=$(a).val();var b=JSON.stringify(c);$.post("controller.php",{action:"update_field_data",user:b},function(d,e){$("td.current").html($(a).val());$(".current").removeClass("current");$("#indicator").hide()},"json")}function makeEditable(a){$(a).html('<input id="editbox" size="'+$(a).text().length+'" type="text" value="'+$(a).text()+'">');$("#editbox").focus();$(a).addClass("current")};